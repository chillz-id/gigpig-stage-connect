{
  "id": "issue-1758729919603-971e0840",
  "type": "issue",
  "severity": "critical",
  "title": "MCP Environment Variable Placeholders Not Resolved",
  "description": "CRITICAL DISCOVERY: Claude Code does NOT resolve environment variable placeholders like ${SUPABASE_ACCESS_TOKEN} in /root/.claude.json. Placeholders are read as literal strings, causing authentication failures with errors like 'Unauthorized. Please provide a valid access token', 'Bad credentials', and 'SUBSCRIPTION_TOKEN_INVALID'. ROOT CAUSE: Environment variable resolution does not work in Claude Code MCP configuration. SOLUTION: Replace ALL environment variable placeholders with actual token values directly in /root/.claude.json. PREVENTION: Always use actual token values directly in Claude Code MCP configuration files, not placeholders.",
  "date": "2025-09-24",
  "timestamp": "2025-09-24T16:05:19.604Z",
  "status": "resolved",
  "investigation_time": null,
  "solution": {
    "description": "SOLUTION APPLIED: Replaced ALL environment variable placeholders with actual token values in /root/.claude.json: 1) SUPABASE_ACCESS_TOKEN with actual sbp_ token, 2) GITHUB_PERSONAL_ACCESS_TOKEN with actual PAT, 3) SLACK_BOT_TOKEN and SLACK_APP_TOKEN with actual tokens, 4) METRICOOL, XERO, APIFY, N8N, LINEAR, BRAVE_API_KEY tokens, 5) AI service tokens (ANTHROPIC_API_KEY, OPENAI_API_KEY, etc.). ALSO: Cleaned up duplicate entries in /root/agents/.env file. RESULT: Some MCP tools now work (Filesystem, Context7, Linear, Magic UI). Some still investigating (Supabase, GitHub, Brave Search may need additional config). KEY LESSON: Environment variable resolution does NOT work in Claude Code MCP configuration.",
    "successful": true,
    "timestamp": "2025-09-24T16:05:29.821Z",
    "status": "resolved"
  },
  "related_files": [],
  "tags": [
    "mcp",
    "authentication",
    "error",
    "credentials"
  ]
}